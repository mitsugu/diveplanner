<!DOCTYPE html>
<html lang="ja">
<head>
	<meta charset="UTF-8">
	<meta name="viewport" content="width=device-width, initial-scale=1.0">
	<title>ガス管理計画計算機</title>
	<link rel="stylesheet" href="gas.css">
	<script defer src="gas.js"></script>
	<style>
		.result-detail { margin-left: 15px; margin-top: 5px; font-size: 0.9em; }
		.result-detail span { font-weight: bold; }
	</style>
</head>
<body>

<div class="container">
	<a href="index.html" style="text-decoration: none; color: #0056b3;">&larr; ツール一覧に戻る</a>
	<h2>ガス管理計画計算機</h2>
	<p class="description">Turn Pressure Ruleに基づき、Minimum Gas (M-Gas) と Return Gas (R-Gas) を分離計算し、安全な折り返し残圧を求めます。</p>

	<div class="input-section">
		<h3>基本データ入力</h3>

		<div class="input-group">
			<label for="rmv">RMV (水面分時換気量, <math xmlns="http://www.w3.org/1998/MathML"><mi>L</mi><mo>/</mo><mi>min</mi></math>)</label>
			<input type="number" id="rmv" value="16" min="5" step="0.1" oninput="calculateGasPlan()">
			<div class="note">※ ダイビング毎 に算出している RMV を元に把握している自分自身の通常の RMV を入力してください。</div>
		</div>

		<div class="input-group">
			<label for="fem">緊急時消費率ファクター (<math xmlns="http://www.w3.org/1998/MathML"><mi>F</mi><mi>-</mi><mi>em</mi></math>) </label>
			<input type="number" id="fem" value="3.0" min="1.0" step="0.1" oninput="calculateGasPlan()">
			<div class="note">※ <math xmlns="http://www.w3.org/1998/MathML"><mi>F</mi><mi>-</mi><mi>em</mi></math> はバディとあなたのストレス消費増を統合した倍率です (例: 3.0 or 4.0)。</div>
		</div>

		<div class="input-group">
			<label for="p_start">初期残圧 (<math xmlns="http://www.w3.org/1998/MathML"><mi>P</mi><mi>start</mi></math>, <math xmlns="http://www.w3.org/1998/MathML"><mi>bar</mi></math>)</label>
			<input type="number" id="p_start" value="200" min="100" step="10" oninput="calculateGasPlan()">
		</div>

		<div class="input-group">
			<label for="v_tank">タンク容量 (<math xmlns="http://www.w3.org/1998/MathML"><mi>V</mi><mi>tank</mi></math>, <math xmlns="http://www.w3.org/1998/MathML"><mi>L</mi></math>)</label>
			<input type="number" id="v_tank" value="10" min="5" step="1" oninput="calculateGasPlan()">
		</div>

		<div class="input-group">
			<label for="d_max">最大水深 (<math xmlns="http://www.w3.org/1998/MathML"><mi>D</mi><mi>max</mi></math>, <math xmlns="http://www.w3.org/1998/MathML"><mi>m</mi></math>)</label>
			<input type="number" id="d_max" value="25.5" min="5" step="1" oninput="calculateGasPlan()">
		</div>

		<div class="input-group">
			<label for="r_ascent">最大浮上速度 (<math xmlns="http://www.w3.org/1998/MathML"><min>m</mi><mi>/</mi><mi>min</mi></math>)</label>
			<input type="number" id="r_ascent" value="9" min="1" step="1" oninput="calculateGasPlan()">
		</div>

		<div class="input-group">
			<label for="t_safety_stop">安全停止時間 (<math xmlns="http://www.w3.org/1998/MathML"><mi>min</mi></math>)</label>
			<input type="number" id="t_safety_stop" value="3" min="0" step="1" oninput="calculateGasPlan()">
		</div>

		<div class="input-group">
			<label for="t_move">アンカーへの推定帰還時間 (<math xmlns="http://www.w3.org/1998/MathML"><mi>T</mi><mi>move</mi></math>, <math xmlns="http://www.w3.org/1998/MathML"><mi>min</mi></math>)</label>
			<input type="number" id="t_move" value="5" min="0" step="1" oninput="calculateGasPlan()">
			<div class="note">※ 最遠点からアンカーまで戻るのにかかる予想時間。この時間は R-Gas に組み込まれます。</div>
		</div>

		<div class="input-group">
			<label for="p_m_priority">M-Gas 固定下限 (<math xmlns="http://www.w3.org/1998/MathML"><mi>P</mi><mi style="font-size:0.7em;">M</mi><mi>priority</mi></math>, <math xmlns="http://www.w3.org/1998/MathML"><mi>bar</mi></math>)</label>
			<input type="number" id="p_m_priority" value="0" min="0" step="5" oninput="calculateGasPlan()">
			<div class="note">※計算されたM-Gasに関わらず、この値をM-Gasとして優先します。空欄/0で計算値優先。</div>
		</div>
	</div>

    <hr>

	<h3>計算結果 (Turn Pressure Rule)</h3>
	<div id="Result_Container" class="result-group">
		<p>Minimum Gas (M-Gas): <span id="M_Gas_Result">---</span> bar <span style="font-weight: normal; font-size: 0.9em; color: #d9534f;">(最終生命線)</span></p>
		<div id="M_Gas_Details" class="result-detail"></div>

		<p>Return Gas (R-Gas): <span id="R_Gas_Result">---</span> bar <span style="font-weight: normal; font-size: 0.9em; color: #007bff;">(帰路費用)</span></p>
		<div id="R_Gas_Details" class="result-detail"></div>

		<hr style="border-top: 1px solid #aaa;">

		<p style="font-size: 1.3em;">Turn Pressure (T-Gas): <span id="T_Gas_Result" style="color: #28a745;">---</span> bar</p>
		<div id="Error_Message" style="color: red; font-size: 0.9em;"></div>
	</div>
</div>
</body>
</html>
